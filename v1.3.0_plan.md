# LibreTerm v1.3.0 Plan (Secure Storage)

**Goal:** Transition to **Windows Credential Manager** for all credential storage to enhance security and leverage OS-level encryption.

## 1. Core Feature: Windows Credential Manager Integration
*   **Concept:** Use the Windows API (`wincred.h`) as the primary storage backend for authentication profiles.
*   **Architecture:**
    *   **Storage Location:** Windows Credential Store (Generic Credentials).
    *   **Target Name Format:** `LibreTerm:<Alias>` (Used to identify and group our app's secrets).
    *   **Data Mapping:**
        *   `Credential.TargetName` <- `LibreTerm:` + `Alias`
        *   `Credential.UserName` <- `Username`
        *   `Credential.CredentialBlob` <- `Password` + `|` + `PrivateKeyPath` (Binary serialized)
*   **Benefits:**
    *   Passwords are encrypted by the OS.
    *   Roaming profiles support (if configured in Windows).
    *   No plaintext passwords on disk.

## 2. UI Enhancements
*   **Password Visibility:** Add a "Show/Hide" (Eye icon or button) toggle in the `IDD_CREDENTIAL_EDIT` dialog.
*   **List Loading:** Update `CredentialManagerDialogProc` to load the list using `CredEnumerate` from the system store.

## 3. Technical Implementation Steps
1.  **Dependencies:** Link against `Advapi32.lib`. Include `<wincred.h>`.
2.  **Refactor `CredentialManager.cpp`:**
    *   Implement `SaveCredential(alias, user, pass, key)` using `CredWriteW`.
    *   Implement `LoadCredentials()` using `CredEnumerateW` (filter by `LibreTerm:*`).
    *   Implement `DeleteCredential(alias)` using `CredDeleteW`.
    *   Implement `GetCredential(alias)` using `CredReadW`.
3.  **UI:** Update `CredentialEditDialogProc` to support password toggling (modifying edit control style).

## 4. Testing
*   **Integration Tests:** Verify creating, reading, and deleting credentials directly via `wincred` API.
*   **E2E:** Verify creating a credential persists across application restarts and is visible in the UI.
