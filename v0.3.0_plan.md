# wstc v0.3.0 Plan (Refinement & Core Stability)

**Goal:** Polish the core experience to handle edge cases, layout glitches, and user convenience features identified in the changelog analysis.

## 1. Core Improvements
*   **Splitter Logic:** Replace the "Magic Number" (5px) splitter logic with a proper hit-test and visual feedback (resize cursor is currently flaky).
*   **Focus Management:** Ensure `WM_SETFOCUS` is handled on the main window to forward focus to the active PuTTY session immediately.
*   **DPI Awareness:** Explicitly enable/disable DPI awareness (via Manifest) to prevent blurry text or misalignment on high-DPI screens.

## 2. UI Enhancements
*   **Context Menus:**
    *   **Sidebar:** Implement `Connect`, `New`, `Delete` actions in the right-click menu.
    *   **Tabs:** Implement `Close Tab` right-click menu.
*   **Status Bar:** Add a simple status bar at the bottom to show "Connected to X", "PID: Y".
*   **Toolbar:** Add a simple toolbar with standard icons (Connect, Settings) using `ImageList`.

## 3. PuTTY Integration
*   **Path Settings:** Add a global "Settings" dialog to configure the path to `putty.exe` (so it doesn't just rely on PATH).
*   **Window Swallowing Retry:** Improve the `WaitForWindow` logic. Sometimes PuTTY shows a configuration dialog first (if no args provided). We need to handle that gracefully or enforce immediate launch.

## 4. Technical Debt
*   **Refactor `MainWindow.cpp`:** It's getting large (~400 lines). Move the Menu/Dialog handling to separate helpers.
*   **Resource Management:** Ensure GDI objects (brushes/fonts) are cleaned up.

## 5. Roadmap
1.  **Context Menus:** Implement the `TrackPopupMenu` logic for TreeView and Tabs.
2.  **Settings Dialog:** Create `IDD_SETTINGS` to store `PuttyPath`.
3.  **Refactor:** Split `MainWindow` logic.
4.  **Polish:** Fix resizing/focus bugs.
