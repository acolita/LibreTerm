# LibreTerm v0.6.0 Plan (Productivity & Search)

**Goal:** Improve usability for users with many connections by adding search filtering, session duplication, and window state persistence.

## 1. Search & Navigation
*   **Search Bar:** Add a text input field above the TreeView.
*   **Filtering Logic:**
    *   As the user types, filter the `TreeView` to show only matching connections (by Name or Host).
    *   Auto-expand folders containing matches.
*   **Refinement:** Ensure the layout handles the new control (Search Bar + TreeView + Splitter).

## 2. Session Management (Power Features)
*   **Clone Connection (Tree):** Right-click a connection -> "Clone".
    *   Opens the "New Connection" dialog pre-filled with the source details.
    *   Default name: "Original Name (Copy)".
*   **Duplicate Session (Tab):** Right-click an active tab -> "Duplicate".
    *   Spawns a new PuTTY instance with the exact same parameters as the active tab.
*   **Close All But This:** Add option to Tab context menu to clean up other sessions.

## 3. Persistence (Window State)
*   **Window Placement:** Save the main window's position, size, and maximized state to `connections.ini` (or `settings.ini`).
*   **Splitter Position:** Save the width of the sidebar.
*   **Restore:** Restore these values on startup.

## 4. Technical Refactoring
*   **Code Split:** `MainWindow.cpp` is becoming monolithic. Move the "Menu Command Handling" and "Dialog Procs" to separate source files or grouping methods to maintain maintainability.

## 5. Implementation Steps
1.  **UI Layout:** Resize TreeView to make room for `IDC_EDIT_SEARCH`.
2.  **Filter Logic:** Implement `FilterConnections(wstring query)` which clears and repopulates the TreeView.
3.  **Cloning Logic:** Implement copy-constructors for the `Connection` logic in the dialog.
4.  **Settings:** Add `[Window]` section to INI handling.
