# wstc v0.4.0 Plan (Organization & Productivity)

**Goal:** Enhance the user experience with better organization (folders), visual polish (icons), and productivity features (shortcuts, WinSCP).

## 1. Organization (Folders)
*   **Data Model:** Update `ConnectionManager` to support hierarchical data.
    *   *Current INI:* Flat list `Session_0`, `Session_1`.
    *   *New INI:* Introduce `Path` or `Group` attribute, or use a pseudo-filesystem structure (e.g., `Group/ConnectionName`).
*   **UI:** Update `TreeView` to render folders.
    *   Support expanding/collapsing.
    *   Right-click on Folder -> "New Connection here".

## 2. Visual Polish (Icons)
*   **ImageList:** Implement `ImageList_Create` and `TreeView_SetImageList`.
*   **Assets:**
    *   Icon 0: Folder (Closed)
    *   Icon 1: Folder (Open)
    *   Icon 2: Terminal/Server
*   **Tabs:** Add a small terminal icon to tabs.

## 3. Productivity (Shortcuts)
*   **Accelerators:** Implement an `HACCEL` table.
    *   `Ctrl+Tab` / `Ctrl+PageDown`: Next Tab.
    *   `Ctrl+Shift+Tab` / `Ctrl+PageUp`: Previous Tab.
    *   `Ctrl+W` / `Ctrl+F4`: Close Current Tab.
*   **Focus:** Ensure keystrokes are captured even if the child window (PuTTY) has focus (this requires a keyboard hook or `RegisterHotKey` because the child window is in a different process).

## 4. WinSCP Integration
*   **Feature:** "File Transfer" context menu on a connection.
*   **Settings:** Add `WinSCP Path` to the Settings Dialog.
*   **Logic:** Launch `winscp.exe` with similar arguments (`sftp://user:pass@host:port`).

## 5. Technical Implementation Steps
1.  **Icons:** Add icon resources (`.ico`) or load standard system icons (shell32.dll) to save space/complexity.
2.  **Data Structure:** Refactor `Connection` struct to include `group`.
3.  **Recursive Load:** Rewrite `ReloadConnections` to build the tree hierarchy.
4.  **Hotkeys:** Use `RegisterHotKey` for global-ish shortcuts (safest way to catch keys when PuTTY has focus).
